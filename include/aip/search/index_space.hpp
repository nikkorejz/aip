#pragma once

#include <array>
#include <cstddef>

namespace aip::search {

/**
 * @brief Описание дискретного пространства индексов (смешанная система счисления).
 *
 * Используется стратегиями перебора/поиска для генерации следующей комбинации
 * индексов параметров. Каждая координата i имеет своё "основание" bases[i],
 * равное количеству значений в соответствующем диапазоне параметра.
 *
 * Поле @ref total — общее число комбинаций (произведение bases).
 * Если хотя бы одно bases[i] равно 0, то total считается равным 0
 * (пространство пустое).
 *
 * @tparam N Число координат (параметров).
 */
template <std::size_t N>
struct IndexSpace {
    /// Размерность пространства (число параметров).
    static constexpr std::size_t dim = N;

    /// Основания по каждой координате (количество вариантов по параметру).
    std::array<std::size_t, N> bases{};

    /// Общее число комбинаций (произведение bases).
    std::size_t total{0};

    /**
     * @brief Проверка на пустое пространство.
     * @return true, если total == 0 (нет ни одной комбинации).
     */
    [[nodiscard]] constexpr bool empty() const noexcept { return total == 0; }
};

} // namespace aip::search
